<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="chat-container">
        <div class="messages" id="messages"></div>
        <div class="message-input">
            <input type="text" id="message-text" placeholder="Insira sua mensagem aqui">
            <input type="file" id="file-upload" accept="image/*, .pdf, .doc, .docx, .txt">
            <button id="send-message">Enviar</button>
        </div>
    </div>
    <script>
        // Script para chat
        const messagesContainer = document.getElementById('messages');
        const messageTextInput = document.getElementById('message-text');
        const sendMessageButton = document.getElementById('send-message');
        const fileUpload = document.getElementById('file-upload');
        
        // Recuperar nome e imagem do perfil
        const profileName = localStorage.getItem('profileName');
        const profileImage = localStorage.getItem('profileImage');

        function createMessageElement(content, isFile = false) {
            const message = document.createElement('div');
            message.classList.add('message');

            const profilePic = document.createElement('img');
            profilePic.src = profileImage || 'https://via.placeholder.com/40';
            profilePic.alt = 'Perfil';
            message.appendChild(profilePic);

            const messageContent = document.createElement('div');
            messageContent.classList.add('message-content');
            if (isFile) {
                const fileLink = document.createElement('a');
                fileLink.href = content;
                fileLink.textContent = 'Arquivo enviado';
                messageContent.appendChild(fileLink);
            } else {
                messageContent.textContent = content;
            }
            message.appendChild(messageContent);
            return message;
        }

        function addMessage(content, isFile = false) {
            const messageElement = createMessageElement(content, isFile);
            messagesContainer.appendChild(messageElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        sendMessageButton.addEventListener('click', () => {
            const messageText = messageTextInput.value;
            if (messageText) {
                addMessage(messageText);
                messageTextInput.value = '';
            }
        });

        fileUpload.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                const fileUrl = URL.createObjectURL(file);
                addMessage(fileUrl, true);
            }
        });

        // Simulação de mensagens para teste
        addMessage('Bem-vindo ao chat!', false);
        addMessage('Como posso ajudar?', false);
    </script>
</body>
</html>
